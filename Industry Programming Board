{"slots":{"0":{"name":"Screen","type":{"events":[],"methods":[]}},"1":{"name":"industry2","type":{"events":[],"methods":[]}},"2":{"name":"industry1","type":{"events":[],"methods":[]}},"3":{"name":"industry3","type":{"events":[],"methods":[]}},"4":{"name":"industry4","type":{"events":[],"methods":[]}},"5":{"name":"industry5","type":{"events":[],"methods":[]}},"6":{"name":"industry6","type":{"events":[],"methods":[]}},"7":{"name":"industry7","type":{"events":[],"methods":[]}},"8":{"name":"industry8","type":{"events":[],"methods":[]}},"9":{"name":"container","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"unit.hide()\nScreen.activate()\nunit.setTimer(\"Update\",1)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"0"},{"code":"local Product = \"MediumAntiGravityGenerators\" --export: The name of the product you are making\nlocal CycleTime = 993600 --export: The time in seconds it takes this industry to complete 1 cycle\nlocal Mass = 124937.482 --export: The mass in kilotons of your product.\n\nlocal status = {}\nlocal remaining = {}\nlocal IndustryCount = 0\nlocal progress = {}\n\nfunction getstatus(industry, i)\n   status[i] = industry.getStatus() \n   progress[i] = math.floor((industry.getUptime() * industry.getEfficiency() - industry.getCycleCountSinceStartup() * CycleTime) / CycleTime * 100 + 0.5)\n   if progress[i] < 0 then progress[i] = 0 end \n   remaining[i] = CycleTime-(industry.getUptime() * industry.getEfficiency() - industry.getCycleCountSinceStartup() * CycleTime) \nend\n\nif industry1 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry1, IndustryCount)\nend\nif industry2 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry2, IndustryCount)\nend\nif industry3 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry3, IndustryCount)\nend\nif industry4 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry4, IndustryCount)\nend\nif industry5 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry5, IndustryCount)\nend\nif industry6 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry6, IndustryCount)\nend\nif industry7 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry7, IndustryCount)\nend\nif industry8 then \nIndustryCount = IndustryCount+1 \ngetstatus(industry8, IndustryCount)\nend\n\nlocal html= [[<html style=\"background-color:rgb(15,30,90);\">\n<div style=\"font-size:8vh;text-align:center;color:black;position:absolute;border:0.5vw black inset;left:2%;top:2%;width:96%;height:10%;background:rgb(0,90,180);\">]]..Product..[[<br></div>\n<div style=\"display: grid; grid-template-columns: auto auto auto auto;grid-template-rows:10vh 9vh 9vh 9vh 9vh 9vh 9vh 9vh;font-size:6vh;text-align:left;color:black;position:absolute;top:14%;left:2%;height:84%;width:96%;border:0.5vw black inset;background:rgb(0,90,190);\">\n]]\n\nfunction appendhtml(status, remaining, progress, number)\n    if status == 'RUNNING' then remaining = math.floor(remaining/60/60)\n    elseif status == 'JAMMED_MISSING_INGREDIENT' then remaining = 0 status = 'NEED PARTS'\n    else remaining = 0 status = 'STOPPED' \n    end\n    html = html..[[\n    <div>Assembly ]]..number..[[: </div>\n    <div>]]..status..[[</div>\n    <div style=\"border:.2vw solid black; height:75%;width:90%;\"><div style=\"width:]]..progress..[[%;background:green;height:100%;\">]].. progress ..[[%</div></div>\n    <div>]]..remaining..[[ hours remain</div>]]\nend\n\nfor i = 1,IndustryCount do\n appendhtml(status[i], remaining[i], progress[i], i) \nend\n\nhtml = html..'</div>'\n\nif container then\nhtml = html..[[<div style=\"font-size:8vh;text-align:center;color:black;position:absolute;border:0.5vw black inset;left:2%;top:88%;width:96%;height:10%;background:rgb(0,90,180);\">In Output Container: ]].. math.floor(container.getItemsMass()/Mass+0.5) ..[[</div>]]\nend\n\nhtml = html..'</html>'\n\nScreen.setHTML(html)","filter":{"args":[{"value":"Update"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"1"},{"code":"Screen.deactivate()","filter":{"args":[],"signature":"stop()","slotKey":"-1"},"key":"2"}],"methods":[],"events":[]}
